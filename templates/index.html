<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prédiction de Prix d'Ordinateur Portable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .price-display {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center space-x-3">
                <i class="fas fa-laptop-code text-4xl"></i>
                <h1 class="text-3xl font-bold">Prédiction de Prix d'Ordinateur Portable</h1>
            </div>
            <p class="text-center mt-2 text-purple-100">Entrez les caractéristiques importantes et obtenez une estimation de prix en dollars</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Form Card -->
        <div class="bg-white rounded-lg card-shadow p-8 mb-6">
            <form id="predictionForm" class="space-y-6">
                <!-- Section 1: Informations de Base -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                        Informations de Base
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Company -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Marque <span class="text-red-500">*</span>
                            </label>
                            <select name="Company" id="Company" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Sélectionnez une marque</option>
                                <option value="Apple">Apple</option>
                                <option value="Dell">Dell</option>
                                <option value="HP">HP</option>
                                <option value="Lenovo">Lenovo</option>
                                <option value="Asus">Asus</option>
                                <option value="Acer">Acer</option>
                                <option value="MSI">MSI</option>
                                <option value="Toshiba">Toshiba</option>
                                <option value="Samsung">Samsung</option>
                                <option value="Razer">Razer</option>
                            </select>
                        </div>

                        <!-- TypeName -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Type d'ordinateur <span class="text-red-500">*</span>
                            </label>
                            <select name="TypeName" id="TypeName" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Sélectionnez un type</option>
                                <option value="Ultrabook">Ultrabook</option>
                                <option value="Gaming">Gaming</option>
                                <option value="Notebook">Notebook</option>
                                <option value="Workstation">Workstation</option>
                                <option value="2 in 1 Convertible">2 in 1 Convertible</option>
                                <option value="Netbook">Netbook</option>
                            </select>
                        </div>

                        <!-- OpSys -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Système d'exploitation <span class="text-red-500">*</span>
                            </label>
                            <select name="OpSys" id="OpSys" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Sélectionnez un OS</option>
                                <option value="Windows">Windows</option>
                                <option value="macOS">macOS</option>
                                <option value="Linux">Linux</option>
                                <option value="No OS">No OS</option>
                            </select>
                        </div>

                        <!-- Inches -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Taille d'écran (pouces) <span class="text-red-500">*</span>
                            </label>
                            <input type="number" name="Inches" id="Inches" required 
                                step="0.1" min="10" max="20" placeholder="Ex: 13.3"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Section 2: Processeur -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-microchip text-green-500 mr-2"></i>
                        Processeur
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- CPU_Company -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Marque du processeur
                            </label>
                            <select name="CPU_Company" id="CPU_Company" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Intel">Intel</option>
                                <option value="AMD">AMD</option>
                                <option value="Apple">Apple</option>
                            </select>
                        </div>

                        <!-- CPU_Type -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Type de processeur <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="CPU_Type" id="CPU_Type" required 
                                placeholder="Ex: Core i5, Core i7, Ryzen 7"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <p class="text-xs text-gray-500 mt-1">Exemple: Core i5, Core i7, Ryzen 7, M1</p>
                        </div>

                        <!-- CPU_Frequency -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Fréquence CPU (GHz)
                            </label>
                            <input type="number" name="CPU_Frequency" id="CPU_Frequency" 
                                step="0.1" min="1.0" max="5.0" placeholder="Ex: 2.3"
                                value="2.0"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Section 3: Mémoire -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-memory text-yellow-500 mr-2"></i>
                        Mémoire et Stockage
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- RAM -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                RAM (GB) <span class="text-red-500">*</span>
                            </label>
                            <select name="RAM" id="RAM" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Sélectionnez la RAM</option>
                                <option value="4">4 GB</option>
                                <option value="8">8 GB</option>
                                <option value="16">16 GB</option>
                                <option value="32">32 GB</option>
                                <option value="64">64 GB</option>
                            </select>
                        </div>

                        <!-- Memory -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Stockage <span class="text-red-500">*</span>
                            </label>
                            <select name="Memory" id="Memory" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">Sélectionnez le stockage</option>
                                <option value="128GB SSD">128GB SSD</option>
                                <option value="256GB SSD">256GB SSD</option>
                                <option value="512GB SSD">512GB SSD</option>
                                <option value="1TB HDD">1TB HDD</option>
                                <option value="1TB SSD">1TB SSD</option>
                                <option value="256GB HDD">256GB HDD</option>
                                <option value="512GB HDD">512GB HDD</option>
                                <option value="2TB HDD">2TB HDD</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Section 4: Graphiques -->
                <div class="border-b pb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-desktop text-indigo-500 mr-2"></i>
                        Carte Graphique
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- GPU_Company -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Marque GPU
                            </label>
                            <select name="GPU_Company" id="GPU_Company" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="Intel">Intel</option>
                                <option value="Nvidia">Nvidia</option>
                                <option value="AMD">AMD</option>
                                <option value="Apple">Apple</option>
                            </select>
                        </div>

                        <!-- GPU_Type -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Type de GPU <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="GPU_Type" id="GPU_Type" required 
                                placeholder="Ex: Iris Plus Graphics 640, GeForce RTX 3050"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <p class="text-xs text-gray-500 mt-1">Exemple: Iris Plus Graphics, GeForce RTX 3050, Radeon RX</p>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Résolution écran -->
                <div class="pb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-expand text-pink-500 mr-2"></i>
                        Résolution d'écran
                    </h2>
                    <div>
                        <!-- ScreenResolution -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                Résolution
                            </label>
                            <input type="text" name="ScreenResolution" id="ScreenResolution" 
                                placeholder="Ex: IPS Panel Retina Display 2560x1600, Full HD 1920x1080"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <p class="text-xs text-gray-500 mt-1">Exemple: IPS Panel Retina Display 2560x1600, Full HD 1920x1080</p>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-center pt-4">
                    <button type="submit" id="submitBtn"
                        class="gradient-bg text-white px-8 py-3 rounded-lg font-semibold text-lg hover:opacity-90 transition-opacity duration-200 shadow-lg flex items-center space-x-2">
                        <i class="fas fa-calculator"></i>
                        <span>Prédire le Prix</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Result Card -->
        <div id="resultCard" class="hidden bg-white rounded-lg card-shadow p-8 price-display">
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 mb-4">
                    <i class="fas fa-check text-white text-3xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">Prix Estimé</h3>
                <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-4" id="predictedPrice">
                    $0
                </div>
                <p class="text-gray-600" id="resultMessage"></p>
            </div>
        </div>

        <!-- Error Card -->
        <div id="errorCard" class="hidden bg-red-50 border border-red-200 rounded-lg p-6 mb-6">
            <div class="flex items-center space-x-3">
                <i class="fas fa-exclamation-circle text-red-500 text-2xl"></i>
                <div>
                    <h3 class="text-lg font-semibold text-red-800">Erreur</h3>
                    <p class="text-red-600" id="errorMessage"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">Application de prédiction de prix d'ordinateur portable • Powered by Volonté Mukovi IR Logiciel et IA Apprenant</p>
        </div>
    </footer>

    <script>
        const form = document.getElementById('predictionForm');
        const submitBtn = document.getElementById('submitBtn');
        const resultCard = document.getElementById('resultCard');
        const errorCard = document.getElementById('errorCard');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Hide previous results
            resultCard.classList.add('hidden');
            errorCard.classList.add('hidden');
            
            // Disable submit button and show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Calcul en cours...</span>';
            
            // Get form data
            const formData = {
                Company: document.getElementById('Company').value,
                TypeName: document.getElementById('TypeName').value,
                Inches: parseFloat(document.getElementById('Inches').value),
                ScreenResolution: document.getElementById('ScreenResolution').value || 'Full HD 1920x1080',
                CPU_Company: document.getElementById('CPU_Company').value || 'Intel',
                CPU_Type: document.getElementById('CPU_Type').value,
                'CPU_Frequency': parseFloat(document.getElementById('CPU_Frequency').value) || 2.0,
                RAM: parseInt(document.getElementById('RAM').value),
                Memory: document.getElementById('Memory').value,
                GPU_Company: document.getElementById('GPU_Company').value || 'Intel',
                GPU_Type: document.getElementById('GPU_Type').value,
                OpSys: document.getElementById('OpSys').value,
                Weight: 2.0  // Valeur par défaut
            };
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    // Show success result
                    const priceUSD = data.predicted_price;
                    document.getElementById('predictedPrice').textContent = `$${priceUSD.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} USD`;
                    document.getElementById('resultMessage').textContent = data.message;
                    resultCard.classList.remove('hidden');
                    resultCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    // Show error
                    document.getElementById('errorMessage').textContent = data.error || 'Une erreur est survenue';
                    errorCard.classList.remove('hidden');
                }
            } catch (error) {
                document.getElementById('errorMessage').textContent = 'Erreur de connexion. Veuillez réessayer.';
                errorCard.classList.remove('hidden');
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-calculator"></i> <span>Prédire le Prix</span>';
            }
        });
    </script>
</body>
</html>
